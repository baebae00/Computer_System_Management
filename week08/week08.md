# 20200994 배서은
**컴퓨터시스템관리 8주차 실습일지**

---
#### 8주차에는 
1. week01 ~ 07 까지의 내용 복습 및 어려웠던 부분 2가지 골라 스스로 문제를 만들고 실습
2. week03 - 사용자 계정 생성, 그룹 설정에서부터 공동 편집 및 관리를 위한 링크 파일 생성하기
3. week06 - 사용자 계정 생성 후 Quota 로 사용자별 공간 할당해보기
---

## 1. 실습과제 결과

* ### **사용자 계정 생성 후 Quota 로 사용자별 공간 할당해보기**
  
* ### **ryan(라이언), apeach(어피치), con(콘) 각각이 사용할 수 있는 파일의 용량 제한 by Quota** <br>
    
  * 새로운 HDD 인식

    ```
    먼저 server(b)를 초기화한 후 10GB의 새로운 HDD를 장착했다. 이후 파티션, 파일시스템을 차례로 생성한 후 부팅시 자동 마운트 되도록 설정해 주었다.
    ```

  * 쿼터 설정

    ```
    본격적으로 사용자별 공간 할당 실습을 진행하였다. 우선 라이언, 어피치, 콘 이렇게 세 명의 사용자를 생성해 주었으며 쿼터DB를 생성해 개인별 쿼터를 설정해 주었다.
    ```

  * 실행 결과

    - 사용자 계정 3개 생성 (라이언, 어피치, 콘)

        ![지워질것2](https://user-images.githubusercontent.com/77660379/114817152-74ace100-9df4-11eb-9a66-28ed00b528aa.JPG)

    - /dev/sdb1 디렉터리 쿼터용으로 설정 후 /userHome 재마운트

        ![지워질것3](https://user-images.githubusercontent.com/77660379/114817198-8b533800-9df4-11eb-8670-c3d36267ea3c.JPG)
    
    - 쿼터 설정

        ![만든것1](https://user-images.githubusercontent.com/77660379/114817223-95753680-9df4-11eb-8a5b-a1e94608f33b.JPG)

     - 사용자별 공간 할당(라이언, 어피치, 콘 모두 15MB 공간을 각각 할당해주었다.) 
        실상 라이언에게 soft 10240KB, hard 15350KB 를 할당한 후 edquota -p 명령어를 사용해 어피치와 콘에게도 같은 양의 공간을 할당해 준 것

        ![만든것2](https://user-images.githubusercontent.com/77660379/114817293-af167e00-9df4-11eb-8747-f5e5deb60baa.JPG)

## 2. 실습과제 Review

* ### **새로 배운 내용**

```
1. Shell
    => 사용자의 명령을 해석하여 커널에 전달
       Kernel & Shell

       Shell Script
       -> 명령어 집합
          과정이 복잡하여 하나라도 빠지면 문제가 생기거나, 매일 또는 주기적으로 해야 하는 명령의 집합
          시스템을 사용하여 환경 설정하는 경우, 애플리케이션을 설치할 경우, 매일 점검해야 하는 시스템 상태 체크 등


2. Shell - bash
    => bash (Bourne Again SHell)
          1998년, 브라이언 폭스Brain Fox가 발표한 유닉스 셸
          우분투에서 기본으로 사용하는 셸

       bash 특징
        -> alias 기능 (명령어 단축 기능)
           History 기능
           연산 기능
           Job Control 기능
           자동 이름 완성 기능
           프롬프트 제어 기능
           명령 편집 기능


3. 작업예약 - cron & at
     => 매일 새벽 5시에 중요한 log 파일을 백업해야 한다면?
        퇴근 후, 시스템을 최신 패키지로 업데이트 하고, 재부팅하고 싶다면?

        cron
        -> 주기적으로 반복되는 일을 자동으로 실행할 수 있도록 시스템 작업을 예약하는 것
           cron과 관련된 데몬(서비스)은 crond, 관련 파일은 /etc/crontab
            /etc/crontab의 형식
            -> 분 시 일 월 요일 사용자 실행명령

        at
        -> 일회성 작업을 예약하는 것
```

* ### **문제가 발생하거나 고민한 내용 + 해결 과정**

- **사용자 추가, 사용자 패스워드 출력 오류**

    ![오오류1](https://user-images.githubusercontent.com/77660379/114819652-c6f00100-9df8-11eb-91c0-07dca32d84d4.JPG)

    ![오오류2](https://user-images.githubusercontent.com/77660379/114819695-d707e080-9df8-11eb-9854-aa260334fe94.JPG)

    ![오류3](https://user-images.githubusercontent.com/77660379/114819756-e71fc000-9df8-11eb-80ba-53ae40bf05b8.JPG)

    ```
    문제발생 및 고민한 내용 : 사용자 추가, 사용자 패스워드 출력에 오류 발생

    해결 과정 : 사용자 계정과 패스워드를 입력하고 존재 여부를 확인하는 과정에서 문제가 발생함
               -> vi adduser-script.sh 에서 ${userList[i]}, ${passwdList[i]} 코드를 작성하였기 때문에 bash 시켰을 때 정보가 차례로 출력되어야 하는데 출력되지 않음
               -> 중괄호, 소괄호 입력에서 실수가 있었던 것으로 예상됨
               -> 문제를 한번에 해결하기 위해 sh 파일 자체를 제거하고 강의를 다시 돌려보며 재생성함
               -> 문제가 해결되고 파일 역시 제대로 저장된 것을 확인함
    ````

* ### **참고할 만한 내용**

  * 리눅스 text모드, gui모드 설정

    [리눅스 모드 변경하기](https://shsec.tistory.com/7)

    ```
    7버전 이하에서는 text모드와 gui모드설정을 /etc/inittab 파일을 수정하여 설정하였지만,
    7버전 이후에서는 systemctl 명령어를 사용하여 변경이 가능하다.

    systemctl get-default
    => 현재 모드 확인

    systemctl set-default multi-user.target
    => text 모드로 변경

    systemctl set-default graphical.target
    => gui 모드로 변경
    ```

  * 30 bash script examples

    [bash script ex](https://linuxhint.com/30_bash_script_examples/#t21)

    ```
    Bash 스크립트는 셸 명령 실행, 여러 명령 실행, 관리 작업 사용자 지정, 작업 자동화 수행 등 다양한 용도로 사용할 수 있다.
    이번 과제에서 생성한 파일제거 bash script 이외에도 유용한 많은 scipt들이 있으니 필요한 셸을 추가적으로 생성하고자 링크를 첨부하였다.
    ```

* ### **회고 (+,-,!)**
```
1. 뿌듯했던 점 (+)
    => 지금까지 해왔던 실습 중 가장 즐겁게 임한 것
          -> 오류가 많이 발생했던 지난 주차와 달리 이번 주차는 코딩 과정이 많아 비교적 수월했고 재미있었다.
             특히 이번에 생성한 파일 제거 bash script는 정말 유용하게 사용될 것이라 생각한다.
             파일을 삭제할 때마다 상위 디렉터리, 그 경로까지 입력하는 과정에서 오류가 난 적이 한두번이 아니다.
             오타를 내기도 하고, 슬래쉬(/)를 두번 누르기도 하고 띄어쓰기에 실수를 내기도 했었기 때문이다.
             그러나 이번에 설치한 bash script로 보다 정확하고 편리하게 파일을 삭제시킬 것을 생각하니 벌써 다음 주차 수업이 기대된다.
       
2. 보완할 점 (-)
    => 띄어쓰기, 괄호 입력에 주의하기
      -> 프로그래밍을 할 때마다 느끼는 점이지만 코딩은 띄어쓰기, 문자 하나하나가 정말 중요한 것 같다.
         이번 실습이 즐거웠지만 그래도 python이나 C++, java와는 또 다른 느낌이었다.
         중괄호는 기존 프로그래밍 방식에 사용되지 않다보니 이번 실습에서 중괄호, 소괄호 구분하는 데에 있어 오류가 났다.
         익숙하지 않더라도 항상 배우려는 자세로 차근차근 임해야함을 느꼈다.
 
3. 꼭 기억할 점 (!) 
    => cron과 at
         -> cron : 주기적인 작업을 예약, 주기적으로 반복되는 일을 자동으로 실행할 수 있도록 시스템 작업을 예약해 놓은 것을 의미

            at : 일회성 작업을 예약, 1회성 예약 작업을 등록하는 것으로 한번 실행되면 소멸되는 방식

         업무 자동화를 위해서는 cron이 at에 비해 더 많이 사용될 것이라 생각한다. 특히 보안 취약점 검사를 수행할 때 매일 반복적으로 점검하거나, 공격자가 악성코드 실행하는 명령을 crontab에 설정하여 반복적으로 악성코드를 실행하는 등의 활용을 할 수 있다.
         최근 대부분의 기업들이 업무 자동화 방식을 도입하는 만큼 cron과 at의 기능을 꼭 기억해야한다고 생각한다.